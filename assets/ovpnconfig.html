{% extends "admin/base.html" %}

{% block stylesheets %}
{% endblock %}

{% block content %}
<div class="jumbotron">
    <div class="container">
        <h1>OpenVPN Configuration</h1>
    </div>
</div>

{% if not (ovpn.server_ip|length
    and ovpn.server_port|length
    and ovpn.ca_cert|length
    and ovpn.client_cert|length
    and ovpn.ta_key|length) %}
    
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <form method="POST" autocomplete="off" class="w-100">
                <div class="form-group">
                    <label>Server IP</label>
                    <input class="form-control" name='server_ip' type='text' placeholder="127.0.0.1">
                </div>
                <div class="form-group">
                    <label>Server Port</label>
                    <input class="form-control" name='server_port' type='text' placeholder="1234">
                </div>
                <div class="form-group">
                    <label>CA Certificate</label>
                    <textarea class="form-control" name='ca_cert' type='text' rows="5" cols="10" placeholder="Enter CA Certificate here"></textarea>
                </div>
                <div class="form-group">
                    <label>Client Certificate</label>
                    <textarea class="form-control" name='client_cert' type='text' rows="5" cols="10" placeholder="Enter Client Certificate here"></textarea>
                </div>
                <div class="form-group">
                    <label>TLS Crypt</label>
                    <textarea class="form-control" name='ta_key' type='text' rows="5" cols="10" placeholder="Enter TLS Crypto Key here"></textarea>
                </div>
                <input id="nonce" name='nonce' type='hidden' value="{{ nonce }}">
                <div class="float-right">
                    <button type="submit" class="btn btn-success text-center">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% else %}
<div class="container">
	<div class="row">
		<div class="col-md-12">
            <form method="POST" autocomplete="off" class="w-100">
                <div class="form-group">
                    <label>Server IP</label>
                    <input class="form-control" name='server_ip' type='text' value="{{ovpn.server_ip}}">
                </div>
                <div class="form-group">
                    <label>Server Port</label>
                    <input class="form-control" name='server_port' type='text' value="{{ovpn.server_port}}">
                </div>
                <div class="form-group">
                    <label>CA Certificate</label>
                    <textarea class="form-control" name='ca_cert' type='text' rows="5" cols="10">{{ovpn.ca_cert}}</textarea>
                </div>
                <div class="form-group">
                    <label>Client Certificate</label>
                    <textarea class="form-control" name='client_cert' type='text' rows="5" cols="10">{{ovpn.client_cert}}</textarea>
                </div>
                <div class="form-group">
                    <label>TLS Crypt</label>
                    <textarea class="form-control" name='ta_key' type='text' rows="5" cols="10">{{ovpn.ta_key}}</textarea>
                </div>
                <input id="nonce" name='nonce' type='hidden' value="{{ nonce }}">
                <div class="float-right">
                    <button type="submit" class="btn btn-success text-center">Update</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endif %}
{% endblock %}